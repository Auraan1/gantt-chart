<template>
    <div class="slds-grid">
        <div class="slds-col slds-size_1-of-6 slds-p-around_small slds-truncate resource">
            <div class="slds-media slds-media_center">
                <div class="slds-media__figure">
                    <lightning-icon icon-name="action:user" size="x-small"></lightning-icon>
                </div>
                <div class="slds-media__body">
                    <h3 class="slds-text-body_default">
                        <a target="_blank" href={link}>{resource.Name}</a>
                    </h3>
                    <h3 class="slds-text-body_small slds-text-color_weak">
                        {resource.Default_Role__c}
                    </h3>
                </div>
            </div>
        </div>
        <!-- Days -->
        <div class="slds-col">
            <div class="slds-is-relative">
                <div class="slds-grid">
                    <template for:each={times} for:item="time">
                        <div key={time} class="slds-col timeslot" data-time={time} onclick={handleClick}>
                            <!-- nothing -->
                        </div>
                    </template>
                </div>
                <div class="slds-is-absolute allocation-container">
                    <template for:each={allocationLists} for:item="allocationList" for:index="index">
                        <template for:each={allocationList} for:item="allocation">
                            <c-gantt_chart_allocation key={allocation.Id} allocation={allocation} index={index} start-date={startDate} end-date={endDate} onupdate={handleAllocationUpdate}></c-gantt_chart_allocation>
                        </template>
                    </template>
                </div>
                <div if:true={actionMenuOpen}>
                    <div class="slds-dropdown slds-dropdown_left slds-is-absolute" style={actionMenuPosition}>
                        <ul class="slds-dropdown__list" role="menu" aria-label="Show More">
                            <li class="slds-dropdown__item" role="presentation" onclick={handleEditClick}>
                                <a href="javascript:void(0);" role="menuitem" tabindex="0">
                                    <span class="slds-truncate" title="Edit">Edit</span>
                                </a>
                            </li>
                            <li class="slds-dropdown__item" role="presentation" onclick={handleDeleteClick}>
                                <a href="javascript:void(0);" role="menuitem" tabindex="-1">
                                    <span class="slds-truncate" title="Delete">Delete</span>
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <!-- /Days -->
    </div>
</template>
